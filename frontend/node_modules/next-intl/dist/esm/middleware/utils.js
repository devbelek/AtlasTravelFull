import{getSortedPathnames as e,matchesPathname as t,normalizeTrailingSlash as n,getLocalePrefix as o,templateToRegex as r,prefixPathname as c}from"../shared/utils.js";function l(n,o,r){const c=e(Object.keys(n));for(const e of c){const c=n[e];if("string"==typeof c){if(t(c,o))return[void 0,e]}else{const n=Object.entries(c),l=n.findIndex((e=>{let[t]=e;return t===r}));l>0&&n.unshift(n.splice(l,1)[0]);for(const[r,c]of n)if(t(c,o))return[r,e]}}for(const e of Object.keys(n))if(t(e,o))return[void 0,e];return[void 0,void 0]}function i(e,t,o,r){let c="";return c+=d(o,a(t,e)),c=n(c),c}function u(e,t,o){e.endsWith("/")||(e+="/");const r=s(t,o),c=new RegExp("^(".concat(r.map((e=>{let[,t]=e;return t.replaceAll("/","\\/")})).join("|"),")/(.*)"),"i"),l=e.match(c);let i=l?"/"+l[2]:e;return"/"!==i&&(i=n(i)),i}function s(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.map((e=>[e,o(e,t)]));return n&&r.sort(((e,t)=>t[1].length-e[1].length)),r}function f(e,t,n){const o=s(t,n);for(const[t,n]of o){let o,r;if(e===n||e.startsWith(n+"/"))o=r=!0;else{const t=e.toLowerCase(),c=n.toLowerCase();(t===c||t.startsWith(c+"/"))&&(o=!1,r=!0)}if(r)return{locale:t,prefix:n,matchedPrefix:e.slice(0,n.length),exact:o}}}function a(e,t){const o=n(t),c=n(e),l=r(c).exec(o);if(!l)return;const i={};for(let e=1;e<l.length;e++){var u;const t=null===(u=c.match(/\[([^\]]+)\]/g))||void 0===u?void 0:u[e-1].replace(/[[\]]/g,"");t&&(i[t]=l[e])}return i}function d(e,t){if(!t)return e;let n=e=e.replace(/\[\[/g,"[").replace(/\]\]/g,"]");return Object.entries(t).forEach((e=>{let[t,o]=e;n=n.replace("[".concat(t,"]"),o)})),n}function h(e,t,n){let o=e;return t&&(o=c(t,o)),n&&(o+=n),o}function g(e){var t,n;return null!==(t=null!==(n=e.get("x-forwarded-host"))&&void 0!==n?n:e.get("host"))&&void 0!==t?t:void 0}function p(e,t){return t.defaultLocale===e||!t.locales||t.locales.includes(e)}function v(e,t,n){let o;return e&&p(t,e)&&(o=e),o||(o=n.find((e=>e.defaultLocale===t))),o||(o=n.find((e=>null!=e.locales&&e.locales.includes(t)))),o||null!=(null==e?void 0:e.locales)||(o=e),o||(o=n.find((e=>!e.locales))),o}function x(e,t){return n(t+e)}function m(e){return"/".concat(e)}function j(e){return e.replace(/\\/g,"%5C").replace(/\/+/g,"/")}export{x as applyBasePath,h as formatPathname,d as formatPathnameTemplate,i as formatTemplatePathname,v as getBestMatchingDomain,g as getHost,l as getInternalTemplate,m as getLocaleAsPrefix,s as getLocalePrefixes,u as getNormalizedPathname,f as getPathnameMatch,a as getRouteParams,p as isLocaleSupportedOnDomain,j as sanitizePathname};
