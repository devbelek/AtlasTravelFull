"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_virtual/_rollupPluginBabelHelpers.js"),r=require("react"),t=require("../../react-client/useLocale.js"),a=require("../../routing/config.js"),l=require("../shared/utils.js"),n=require("./ClientLink.js"),o=require("./redirects.js"),c=require("./useBasePathname.js"),i=require("./useBaseRouter.js");function u(e){return e&&e.__esModule?e:{default:e}}var s=u(r);exports.default=function(u){const f=a.receiveRoutingConfig(u);function h(){const e=t.default();if(!f.locales.includes(e))throw new Error(void 0);return e}function d(r,t){let{href:a,locale:o,...c}=r;const i=h(),u=o||i;return s.default.createElement(n.default,e.extends({ref:t,href:l.compileLocalizedPathname({locale:u,pathname:a,params:"object"==typeof a?a.params:void 0,pathnames:f.pathnames}),locale:o,localePrefix:f.localePrefix},c))}const m=r.forwardRef(d);function p(e){let{href:r,locale:t}=e;return l.compileLocalizedPathname({...l.normalizeNameOrNameWithParams(r),locale:t,pathnames:f.pathnames})}return m.displayName="Link",{Link:m,redirect:function(e){const r=p({href:e,locale:h()});for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return o.clientRedirect({pathname:r,localePrefix:f.localePrefix},...a)},permanentRedirect:function(e){const r=p({href:e,locale:h()});for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return o.clientPermanentRedirect({pathname:r,localePrefix:f.localePrefix},...a)},usePathname:function(){const e=c.default(f.localePrefix),t=h();return r.useMemo((()=>e?l.getRoute(t,e,f.pathnames):e),[t,e])},useRouter:function(){const e=i.default(f.localePrefix),t=h();return r.useMemo((()=>({...e,push(r){for(var a,l=arguments.length,n=new Array(l>1?l-1:0),o=1;o<l;o++)n[o-1]=arguments[o];const c=p({href:r,locale:(null===(a=n[0])||void 0===a?void 0:a.locale)||t});return e.push(c,...n)},replace(r){for(var a,l=arguments.length,n=new Array(l>1?l-1:0),o=1;o<l;o++)n[o-1]=arguments[o];const c=p({href:r,locale:(null===(a=n[0])||void 0===a?void 0:a.locale)||t});return e.replace(c,...n)},prefetch(r){for(var a,l=arguments.length,n=new Array(l>1?l-1:0),o=1;o<l;o++)n[o-1]=arguments[o];const c=p({href:r,locale:(null===(a=n[0])||void 0===a?void 0:a.locale)||t});return e.prefetch(c,...n)}})),[e,t])},getPathname:p}};
